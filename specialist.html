<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Specialist Chat</title>
  <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; align-items: center;}
    #chatBox { border: 1px solid #ccc; height: 300px; overflow-y: auto; padding: 10px; margin-bottom: 10px; border-radius: 10px;}
    .user { background: #e9ecef; padding: 6px 12px; border-radius: 10px; margin: 5px 0; max-width: 80%; }
    .specialist { background: #0d6efd; color: white; padding: 6px 12px; border-radius: 10px; margin: 5px 0; max-width: 80%; margin-left: auto; }
  </style>
</head>
<body>
  <h2>Specialist Panel</h2>
  <div id="chatBox"></div>
  <div class="inputSend">
    <input type="text" id="chatInput" placeholder="Reply..." />
  <button id="sendBtn">Send</button>
  </div>
  

  <script>
    const socket = io("http://localhost:3000");

    const chatBox = document.getElementById("chatBox");
    const chatInput = document.getElementById("chatInput");
    const sendBtn = document.getElementById("sendBtn");

    // Register as specialist
    socket.emit("registerSpecialist");

    // Receive user messages
    socket.on("chatMessage", (data) => {
      if (data.sender === "user") {
        appendMessage(data.msg, "user");
      }
    });

    // Send reply
    sendBtn.addEventListener("click", () => {
      const msg = chatInput.value.trim();
      if (msg) {
        socket.emit("specialistMessage", msg);
        appendMessage(msg, "specialist");
        chatInput.value = "";
      }
    });

    chatInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") sendBtn.click();
    });

    function appendMessage(msg, type) {
      const p = document.createElement("p");
      p.innerText = msg;
      p.className = type;
      chatBox.appendChild(p);
      chatBox.scrollTop = chatBox.scrollHeight;
    }
  </script>
</body>
</html>
